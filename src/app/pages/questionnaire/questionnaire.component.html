<div class="container description-box">
  <h5 class="box-title">Questionario per {{ role }}</h5>

  <!-- Step Line per il progresso -->
  <div class="step-container" *ngIf="!reportGenerated">
    <div class="progress-bar"></div>
    <div *ngFor="let question of displayedQuestions; let i = index" class="step" [class.completed]="isCompleted(i)"
      [class.current]="i === currentQuestionIndex && !reportGenerated">
      {{ i + 1 }}
    </div>
  </div>

  <!-- Sezione delle domande -->
  <form *ngIf="!reportGenerated && questions && questions.length" (ngSubmit)="onSubmit()">
    <div *ngIf="displayedQuestions[currentQuestionIndex]" class="form-group mb-4 question-box">
      <label class="form-label required question-text">{{ displayedQuestions[currentQuestionIndex].question }}</label>
      <div class="options-container">
        <div *ngFor="let option of displayedQuestions[currentQuestionIndex].options; let j = index" class="option-item">
          <input type="radio" [name]="'question-' + currentQuestionIndex" [value]="j"
            [(ngModel)]="userAnswers[currentQuestionIndex]" required class="form-check-input custom-radio" />
          <label class="form-check-label">{{ option }}</label>
        </div>
      </div>
    </div>

    <div class="button-container">
      <button type="button" class="btn btn-primary custom-btn" (click)="nextQuestion()"
        [disabled]="userAnswers[currentQuestionIndex] === undefined">
        Avanti
      </button>
    </div>
  </form>

  <!-- Sezione del messaggio di ringraziamento -->
  <div *ngIf="reportGenerated" class="thank-you-message mt-4">
    <h5>Grazie per aver completato il test!</h5>
    <p>Il report delle risposte verr√† inviato per email al momento dell'invio della candidatura.</p>
  </div>
</div>